{% extends "guild/guild_settings.html" %}

{% block pagetitle %}+{{ b.name }} Settings - Ruqqus Guildmaster Tools{% endblock %}

{% block stylesheets %}

{% if v and v.referral_count and session.get("dark_mode_enabled") %}
<link id="css-link" rel="stylesheet" href="/+{{ p.board.name }}/dark.css">
{% else %}
<link id="css-link" rel="stylesheet" href="/+{{ p.board.name }}/main.css">
{% endif %}

{% endblock %}

{% block content %}
<div class="row justify-content-around">

  <div class="col h-100">

    <table>

    {% if v and b.has_mod(v) %}
      {% for ma in actions %}
        <tr>
          <td>{{ ma.age_string }}</td>
          <td><a href="{{ ma.user.permalink }}">{{ ma.user.username }}</td>
          <td><i class="fas {{ ma.icon }} fa-fw mx-1"></i></td>
          <td>{{ ma.str | safe }}</td>
        </tr>

      {% endfor %}
    {% else %}
      {% for ma in actions %}
        <tr class="px-2">
          <td>{{ ma.age_string }}</td>
          <td>{% if ma.user_id==1 or ma.actiontype.get('show_mod') %}<a href="{{ ma.user.permalink }}">{{ ma.user.username }}</a>{% else %}a guildmaster{% endif %}</td>
          <td><i class="fas {{ ma.icon }} fa-fw mx-1"></i></td>
          <td>{{ ma.str | safe }}</td>
        </tr>

      {% endfor %}
    {% endif %}

    </table>

    <nav aria-label="Page navigation" class="mb-5">
      <ul class="pagination pagination-sm mb-0">
        {% if page>1 %}
        <li class="page-item">
          <small><a class="page-link" href="page={{ page-1 }}" tabindex="-1">Prev</a></small>
        </li>
        {% else %}
        <li class="page-item disabled"><span class="page-link">Prev</span></li>
        {% endif %}
        {% if next_exists %}
        <li class="page-item">
          <small><a class="page-link" href="?page={{ page+1 }}">Next</a></small>
        </li>
        {% else %}
        <li class="page-item disabled"><span class="page-link">Next</span></li>
        {% endif %}
      </ul>
    </nav>

  </div>
</div>
{% endblock %}
